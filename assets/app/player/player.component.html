<div id="OpenQueue"
	(click)="playerService.player.openQueue()">
	<md-icon>
		queue_music
	</md-icon>
</div>

<div id="Queue"
	class="queue-closed"
	[ngClass]="{'queue-closed': playerService.player.queueOpen == false}">
	<div style="display: block;">
		<h3>
			Queue
			<button md-icon-button id="CloseQueue" (click)="playerService.player.closeQueue()">
				<md-icon>
					close
				</md-icon>
			</button>
		</h3>
	</div>

	<div class="queue-list" *ngIf="playerService.player.queue.length">
		<div
			class="queue-item"
			*ngFor="let track of playerService.player.queue; let i = index"
			[style.backgroundColor]="playerService.player.queuePosition == i ? 'rgba(0, 0, 0, 0.13)' : null">

			<span style="float: left;" *ngIf="playerService.player.queuePosition == i">
				<md-icon
					class="player-control player-pause"
					 *ngIf="!playerService.player.audio.paused"
					(click)="playerService.player.pause()">
					pause
				</md-icon>
				<md-icon
					class="player-control player-play"
					 *ngIf="playerService.player.audio.paused"
					(click)="playerService.player.resume()" >
					play_arrow
				</md-icon>
			</span>

			<span style="float: left;" *ngIf="playerService.player.queuePosition != i">
				<md-icon
					class="player-control player-play"
					(click)="playerService.player.playPosition(i)" >
					play_arrow
				</md-icon>
			</span>

			<span class="queue-item-field">
				<span class="queue-item-field-text">
					{{i+1}}. {{ track.name }}
				</span>
				<span style="float: right; padding-top: 1px; color: rgba(255, 255, 255, 0.34);">
					{{track.lengthFormatted}}
				</span>
			</span>
		</div>
	</div>
	<div class="queue-list" *ngIf="playerService.player.queue.length == 0" style="text-align: center;">
		<md-icon class="error-icon">
			queue_music
		</md-icon><br />
		<div class="error-text">
			No music queued
		</div>
	</div>
</div>

<div id="Player">
	<div *ngIf="playerService.player.currentTrack">
		<img class="now-playing-art" src="{{playerService.player.currentTrack.album.imagePath}}"/>

		<div
			class="now-playing"
			*ngIf="playerService.player.currentTrack"
			style="float: left;">
			<h3 class="now-playing-field">
				{{playerService.player.currentTrack.name}}
			</h3>
			<em class="now-playing-field" style="color: rgba(255, 255, 255, 0.87);">
				{{playerService.player.currentTrack.album.name}} ({{playerService.player.currentTrack.album.year}})
			</em><br />
			<span class="now-playing-field" style="color: rgba(255, 255, 255, 0.54);">
				{{playerService.player.currentTrack.album.artist.name}}
			</span><br />
		</div>
		<!-- Toolbar -->
		<div style="float: right; font-size: 46px;">
			<md-icon
				class="player-control player-pause"
				*ngIf="!playerService.player.audio.paused"
				(click)="playerService.player.pause()">
				pause
			</md-icon>
			<md-icon
				class="player-control player-play"
				*ngIf="playerService.player.audio.paused"
				(click)="playerService.player.resume()">
				play_arrow
			</md-icon>

			<md-icon
				class="player-control player-play"
				*ngIf="playerService.player.volume >= 0.8">
				volume_up
			</md-icon>
			<md-icon
				class="player-control player-play"
				*ngIf="playerService.player.volume >= 0.4 && playerService.player.volume < 0.8">
				volume_down
			</md-icon>
			<md-icon
				class="player-control player-play"
				*ngIf="playerService.player.volume > 0 && playerService.player.volume < 0.4">
				volume_mute
			</md-icon>
			<md-icon
				class="player-control player-play"
				*ngIf="playerService.player.volume == 0">
				volume_off
			</md-icon>

			<!-- Volume -->
			<md-slider min="0" max="100" step="1" value="50" [(ngModel)]="volume" ></md-slider>
		</div>

		<div class="now-playing-elapsed">
			{{playerService.player.elapsed}} / {{playerService.player.currentTrack.lengthFormatted}}
		</div>

		<md-progress-bar
			class="now-playing-progress"
			[mode]="determinate"
			[value]="playerService.player.elapsedPercent">
		</md-progress-bar>
	</div>
	<div *ngIf="!playerService.player.currentTrack">
		<p style="color: rgba(80, 80, 80, 0.87);">
			Nothing currently playing
		</p>
	</div>
</div>
